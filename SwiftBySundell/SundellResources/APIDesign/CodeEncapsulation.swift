//
//  CodeEncapsulation.swift
//  SwiftBySundell
//
//  Created by Vladislav Gushin on 07/03/2019.
//  Copyright ¬© 2019 Vladislav Gushin. All rights reserved.
//

import UIKit
/*–û–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—é—â–µ–π—Å—è –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π - –¥–µ—Ä–∂–∞—Ç—å –≤–µ—â–∏ —Ö–æ—Ä–æ—à–æ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏. –ü–æ –º–µ—Ä–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –æ–±—ä–µ–∫—Ç—ã —á–∞—Å—Ç–æ –ø–æ–ª—É—á–∞—é—Ç –Ω–æ–≤—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∏–ª–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ —Ç–∞–∫, –∫–∞–∫ –æ–Ω–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–∞–ª–∏—Å—å. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –±–µ–∑ —É—Ç–µ—á–µ–∫ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–º.
 
 –í–æ –º–Ω–æ–≥–æ–º —ç—Ç–æ —Å–≤–æ–¥–∏—Ç—Å—è –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ API. –ß–µ—Ç–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ API –¥–ª—è –Ω–∞—à–∏—Ö —Ç–∏–ø–æ–≤ –º–æ–∂–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–º–æ—á—å –Ω–∞–º –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à –∫–æ–¥ –∏ –∏–∑–±–µ–∂–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∏–ø–∞–º–∏. –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–∑–≤–æ–ª–∏—Ç—å –Ω–∞–º —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.*/

// MARK: - Hiding implementation details

/*–¢–∞–∫ –ø–æ—á–µ–º—É –∂–µ —Ç–∞–∫ –≤–∞–∂–Ω–æ —Å–∫—Ä—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤?
 –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–∏–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã —Å–æ–∑–¥–∞–µ–º ProfileViewController,
 –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 . –£ –Ω–µ–≥–æ –µ—Å—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –∫–æ—Ç–æ—Ä–æ–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–µ–ª–µ–≥–∞—Ç–æ–º –≤ viewDidLoad, –Ω–∞–ø—Ä–∏–º–µ—Ä:*/

fileprivate protocol ProfileHeaderViewDelegate: class {

}

fileprivate final class ProfileHeaderView: UIView {
    weak var delegate: ProfileHeaderViewDelegate?
}

fileprivate class ProfileViewController: UIViewController, ProfileHeaderViewDelegate {
    var headerView: UIView!

    override func viewDidLoad() {
        super.viewDidLoad()
        self.headerView = ProfileHeaderView()
        (self.headerView as! ProfileHeaderView).delegate = self
        view.addSubview(self.headerView)
    }
}

/*–í—ã—à–µ–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã–º, –Ω–æ –≤ –∏—Ç–æ–≥–µ –º—ã —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ü–æ—Å–∫–æ–ª—å–∫—É —Å–≤–æ–π—Å—Ç–≤–æ headerView –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç–Ω—ã–º (–∏–ª–∏ fileprivate), –µ–≥–æ —Å–ª–µ–¥—É–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —á–∞—Å—Ç—å API ProfileViewController. –•–æ—Ç—è —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–∏—á—Ç–æ–∂–Ω–æ–π –¥–µ—Ç–∞–ª—å—é, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–∏—Å–∫ –ø–æ—è–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫.
 
 –î–æ–ø—É—Å—Ç–∏–º, –º—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ –Ω–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—à–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–º–∏—É–º-—Ä–µ–∂–∏–º, —Å–æ–≤–µ—Ä—à–∞—è –ø–æ–∫—É–ø–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç —ç—Ç–æ, –º—ã —Ö–æ—Ç–∏–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–¥ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è, —á—Ç–æ–±—ã –æ–Ω –≤—ã–≥–ª—è–¥–µ–ª –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª–µ–µ –ø—Ä–∏—á—É–¥–ª–∏–≤–æ (–∫–∞–∫ –Ω–µ–±–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ), –ø–æ—ç—Ç–æ–º—É –º—ã –≤ –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞–µ–º —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —ç—Ç–æ–≥–æ:*/
fileprivate final class PremiumHeaderView: UIView {
    weak var delegate: ProfileHeaderViewDelegate?
}

fileprivate extension ProfileViewController {
    func userDidUnlockPremiumSubscription() {
        self.headerView = PremiumHeaderView()
    }
}
/*–ü—Ä–æ–±–ª–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å–≤—è–∑—å –¥–µ–ª–µ–≥–∞—Ç–∞ –º–µ–∂–¥—É –Ω–∞—à–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –∏ –µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ç–µ—Ä—è–µ—Ç—Å—è (—Ç–∞–∫ –∫–∞–∫ –º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω—è–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä). –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—à–∏–±–∫–∞–º –∏ –Ω–µ –æ—Ç–≤–µ—á–∞—é—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, –∏ —Ç–∞–∫ –∫–∞–∫ –æ–Ω –≤—ã–∑–≤–∞–Ω –≤–Ω–µ—à–Ω–∏–º —É—Å–ª–æ–≤–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –Ω–µ –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–æ–∫—É–ø–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏) - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ä–∏—Å–∫, —á—Ç–æ —ç—Ç–∏ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–µ–æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –¥–ª—è –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫.
 
 –ß—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞, –¥–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–æ headerView –ø—Ä–∏–≤–∞—Ç–Ω—ã–º:*/

fileprivate class HeaderBase: UIView {
    func applyStandardAppearance() {

    }

    func applyPremiumAppearance() {

    }
}

fileprivate class ProfileViewController1: UIViewController, ProfileHeaderViewDelegate {
    private lazy var headerView = HeaderBase()
}
/*–≠—Ç–æ –æ—Ç–ª–∏—á–Ω—ã–π –ø–µ—Ä–≤—ã–π —à–∞–≥, –Ω–æ –º—ã —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—É—é —Ñ–æ—Ä–º—É API, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥—Ä—É–≥–∏–º —Ç–∏–ø–∞–º –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å ProfileViewController –¥–ª—è –ø—Ä–µ–º–∏—É–º-—Ä–µ–∂–∏–º–∞, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∏.
 
 –ß—Ç–æ –º—ã —Å–¥–µ–ª–∞–µ–º, —Ç–∞–∫ —ç—Ç–æ —Ç–æ, —á—Ç–æ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å —Å–∞–º–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –º—ã –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π API, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, –≤ –∫–∞–∫–æ–º —Ä–µ–∂–∏–º–µ –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:*/
fileprivate extension ProfileViewController1 {
    enum Mode {
        case standard
        case premium
    }

    func enterMode(_ mode: Mode) {
        switch mode {
        case .standard:
            headerView.applyStandardAppearance()
        case .premium:
            headerView.applyPremiumAppearance()
        }
    }
}

/*–í—ã—à–µ —Å–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –º—ã –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–∏–ø Mode –≤ –≤–∏–¥–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫ –Ω–µ–º—É –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–∏–¥–æ–≤ (–∫–æ—Ç–æ—Ä—ã–µ, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –±—É–¥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å —Ç–∞–∫–∏–µ –≤–µ—â–∏, –∫–∞–∫ —Ü–≤–µ—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ç. –î.). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –Ω–µ —Å–æ–∑–¥–∞–µ–º —Å–∏–ª—å–Ω—É—é —Å–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏ –µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∞.
 
 –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –ø–æ–∫—É–ø–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:*/
fileprivate func userDidUnlockPremiumSubscription(profileViewController: ProfileViewController1) {
    profileViewController.enterMode(.premium)
}
/*–í—ã–ø–æ–ª–Ω–∏–≤ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –º—ã —Ç–µ–ø–µ—Ä—å –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–ª–∏ ProfileHeaderView (—á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ¬´–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º¬ª) –∏ –¥–æ–±–∞–≤–∏–ª–∏ —è–≤–Ω—ã–π API, –∫–æ—Ç–æ—Ä—ã–π –º—ã –º–æ–∂–µ–º –ª–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è üëç.*/

// MARK: - Protocols and private types

/*–ï—â–µ –æ–¥–∏–Ω –æ—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ - —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —á–∞—Å—Ç–Ω—ã–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏. –ü–æ–¥–æ–±–Ω–æ —Ç–æ–º—É, –∫–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ç–∏–ø–∞–º –∫ —Ç–∞–∫–∏–º –≤–µ—â–∞–º, –∫–∞–∫ –∑–∞–ø–∏—Å—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –≤ Swift¬ª, –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ API –≤–æ –≤–Ω–µ—à–Ω–µ–º –º–∏—Ä–µ, –∞ —Å–∫—Ä—ã–≤–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º.
 
 –î–æ–ø—É—Å—Ç–∏–º, –º—ã —Å–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –º–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è. –î–ª—è –Ω–∞—á–∞–ª–∞ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç API –¥–ª—è ImageLoader, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∞—à–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è:*/

fileprivate enum Result<T> {
    case value(T)
    case error(Error)
}

fileprivate protocol ImageLoader {
    typealias Handler = (Result<UIImage>) -> Void
    func loadImage(from url: URL, then handler: @escaping Handler)
}

/*–¢–∞–∫ –∫–∞–∫ —É –Ω–∞—Å –±—É–¥–µ—Ç –º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–º–µ–Ω–∏—Ç—å –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –±—É–¥–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω.
 
 –ß—Ç–æ–±—ã —Ö–æ—Ä–æ—à–æ —Å —ç—Ç–∏–º —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è, –¥–∞–≤–∞–π—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Ñ–∞–±—Ä–∏—á–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º –∏ —Å–æ–∑–¥–∞–¥–∏–º ImageLoaderFactory, –∫–æ—Ç–æ—Ä—ã–π –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è. –•–∏—Ç—Ä–æ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –º—ã –Ω–µ –±—É–¥–µ–º —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∞–±—Ä–∏–∫–∞, - –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª—é–±–æ–π —Ç–∏–ø, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π ImageLoader, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ SessionImageLoader –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫:*/

fileprivate final class ImageLoaderFactory {
    private let session: URLSession

    init(session: URLSession = .shared) {
        self.session = session
    }

    func makeImageLoader() -> ImageLoader {
        return SessionImageLoader(session: self.session)
    }
}
/*–ü–æ—Å–∫–æ–ª—å–∫—É –º—ã –Ω–µ –≤–∫–ª—é—á–∞–µ–º –≤ –Ω–∞—à API –∫–∞–∫–æ–π-–ª–∏–±–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø, –º—ã –º–æ–∂–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é SessionImageLoader –∑–∞–∫—Ä—ã—Ç–æ–π:*/
private extension ImageLoaderFactory {
    struct Request {
        let url: URL
        let handler: (Result<UIImage>) -> Void
    }

    class SessionImageLoader: ImageLoader {
        let session: URLSession

        init(session: URLSession) {
            self.session = session
        }

        func loadImage(from url: URL,
                       then handler: @escaping (Result<UIImage>) -> Void) {
            let request = Request(url: url, handler: handler)
            perform(request)
        }

        func perform(_ request: Request) {

        }
    }
}
/*–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ–≥–æ-—Ç–æ –ø–æ–¥–æ–±–Ω–æ–≥–æ –≤—ã—à–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç –Ω–∞–º –±–æ–ª—å—à—É—é –≥–∏–±–∫–æ—Å—Ç—å –∏ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è –¥–µ–ª–∞–µ—Ç API –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º. –í—Å–µ, —á—Ç–æ –∑–Ω–∞–µ—Ç –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, - —ç—Ç–æ —Ç–æ, —á—Ç–æ –æ–Ω–æ —Å–ø–æ—Å–æ–±–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - –º—ã –∏—Å–∫–ª—é—á–∞–µ–º —Ä–∏—Å–∫ —Ç–æ–≥–æ, —á—Ç–æ –≤ –Ω–∞—à–µ–π –±–∞–∑–µ –∫–æ–¥–∞ –±—É–¥–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ URLSession, –∏ –º—ã –º–æ–∂–µ–º –¥–∞–∂–µ –¥–µ–ª–∞—Ç—å —Ç–∞–∫–∏–µ –≤–µ—â–∏, –∫–∞–∫ –∑–∞–º–µ–Ω–∞ SessionImageLoader –Ω–∞ –º–∞–∫–µ—Ç –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–∫–æ—Ç–æ—Ä—ã–π –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ —É –Ω–∞—Å –µ—â–µ –Ω–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞–∫–æ–π-–ª–∏–±–æ –¥—Ä—É–≥–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.*/

// MARK: - Third party dependencies
/*–¢–æ—Ç –∂–µ –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ –ø–æ–¥—Ö–æ–¥ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –û–¥–Ω–∞ –∏–∑ –æ–ø–∞—Å–Ω–æ—Å—Ç–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∞–∫–∏—Ö –≤–µ—â–µ–π, –∫–∞–∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ SDK, –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –º–æ–≥—É—Ç –ª–µ–≥–∫–æ –Ω–∞—á–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å—Å—è –ø–æ –≤—Å–µ–π –±–∞–∑–µ –∫–æ–¥–∞, —á—Ç–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç —Ç–∞–∫–∏–µ –≤–µ—â–∏, –∫–∞–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –Ω–æ–≤–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.
 
 –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –º—ã –≤—ã—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å –Ω–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å SessionImageLoader –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º—ã –º–æ–≥–ª–∏ –±—ã —Å–¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ, –µ—Å–ª–∏ –±—ã –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω—é—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –í–æ—Ç –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –º–æ–≥ –±—ã –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞—à ImageLoaderFactory, –µ—Å–ª–∏ –±—ã –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º AmazingImages:*/

//import AmazingImages
//
//class ImageLoaderFactory {
//    func makeImageLoader() -> ImageLoader {
//        return AmazingImageLoader()
//    }
//}
