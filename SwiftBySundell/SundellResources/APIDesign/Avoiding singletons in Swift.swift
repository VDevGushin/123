//
//  Avoiding singletons in Swift.swift
//  SwiftBySundell
//
//  Created by Vlad Gushchin on 17/04/2019.
//  Copyright ¬© 2019 Vladislav Gushin. All rights reserved.
//

import UIKit

// MARK: - Singleton
//
//–ü–æ—á–µ–º—É —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã —Ç–∞–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã?
//
//–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, –¥–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å –≤–æ–ø—Ä–æ—Å–∞, –ø–æ—á–µ–º—É —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã —Ç–∞–∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞. –ï—Å–ª–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–≥–ª–∞—Å–Ω—ã —Å —Ç–µ–º, —á—Ç–æ –∏—Ö —Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å, –ø–æ—á–µ–º—É –æ–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è?
//
//–Ø –¥—É–º–∞—é, —á—Ç–æ –æ—Ç–≤–µ—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π. –í–æ-–ø–µ—Ä–≤—ã—Ö, —è –¥—É–º–∞—é, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Ç–æ–≥–æ, —á—Ç–æ —à–∞–±–ª–æ–Ω —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞ —Ç–∞–∫ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º Apple, –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Å–∞–º–∏ Apple –µ–≥–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç. –ö–∞–∫ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –º—ã —á–∞—Å—Ç–æ –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ Apple, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å ¬´–ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏¬ª –¥–ª—è —Å–≤–æ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º, –∏ –ª—é–±–æ–π —à–∞–±–ª–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω–∏ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç, —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—á–µ–Ω—å —à–∏—Ä–æ–∫–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–º –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ.
//
//–í—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏, —è –¥—É–º–∞—é, —ç—Ç–æ —É–¥–æ–±—Å—Ç–≤–æ. –°–∏–Ω–≥–ª—Ç–æ–Ω—ã –º–æ–≥—É—Ç —á–∞—Å—Ç–æ —Å–ª—É–∂–∏—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ —è—Ä–ª—ã–∫–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –±–∞–∑–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞–º, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –ø–æ —Å—É—â–µ—Å—Ç–≤—É –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞. –ü—Ä–æ—Å—Ç–æ –≤–∑–≥–ª—è–Ω–∏—Ç–µ –Ω–∞ —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä, –≥–¥–µ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–æ—à–µ–¥—à–µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º—É –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, –≤ ProfileViewController, –∞ —Ç–∞–∫–∂–µ –≤—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏:
fileprivate struct User {
    let name: String
}

fileprivate class UserManager {
    private init() { }
    static let shared = UserManager()

    let currentUser: User? = User(name: "Vlad")
    func logOut() { }
}

fileprivate class ProfileViewController: UIViewController {
    private lazy var nameLabel = UILabel()

    override func viewDidLoad() {
        super.viewDidLoad()
        nameLabel.text = UserManager.shared.currentUser?.name
    }

    private func handleLogOutButtonTap() {
        UserManager.shared.logOut()
    }
}
/*–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ–≥–æ-–ª–∏–±–æ –ø–æ–¥–æ–±–Ω–æ–≥–æ –≤—ã—à–µ - –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ —Å–∏–Ω–≥–ª—Ç–æ–Ω–µ UserManager - –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ (–∏ –æ—á–µ–Ω—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–æ!). –¢–∞–∫ —á—Ç–æ –∂–µ —Ç–∞–∫–æ–≥–æ –ø–ª–æ—Ö–æ–≥–æ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–≥–æ —à–∞–±–ª–æ–Ω–∞? ü§î*/
/*
 –ß—Ç–æ —Ç–∞–∫–æ–≥–æ –ø–ª–æ—Ö–æ–≥–æ –≤ —Å–∏–Ω–≥–ª–µ—Ç–∞—Ö?
 
 –ü—Ä–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–∏ —Ç–∞–∫–∏—Ö –≤–µ—â–µ–π, –∫–∞–∫ —à–∞–±–ª–æ–Ω—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –ª–µ–≥–∫–æ –æ–∫–∞–∑–∞—Ç—å—Å—è –≤ –ª–æ–≤—É—à–∫–µ —Å–ª–∏—à–∫–æ–º —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—à –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ¬´–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º¬ª –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å –≤—Å–µ–º –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º, —Ö–æ—Ä–æ—à–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è, –∏ –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–∞–∫–æ–µ-—Ç–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ.
 
 –ò—Ç–∞–∫, –∫–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –æ–±—ã—á–Ω–æ –≤—ã–∑—ã–≤–∞—é—Ç —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã, –∏ –ø–æ—á–µ–º—É –∏—Ö —Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å? –¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —è —Å—Ç–∞—Ä–∞—é—Å—å –∏–∑–±–µ–≥–∞—Ç—å –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∏–≥—Ä:
 
 –û–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º –∏–∑–º–µ–Ω—è–µ–º—ã–º –æ–±—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –ò—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –≤—Å–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, –∏ —á–∞—Å—Ç–æ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –æ—à–∏–±–∫–∏, –∫–æ–≥–¥–∞ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è.
 –û—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É —Å–∏–Ω–≥–ª–µ—Ç–æ–Ω–∞–º–∏ –∏ –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∏—Ö, –æ–±—ã—á–Ω–æ –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã. –ü–æ—Å–∫–æ–ª—å–∫—É —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã –Ω–∞—Å—Ç–æ–ª—å–∫–æ —É–¥–æ–±–Ω—ã –∏ –ª–µ–≥–∫–∏ –≤ –¥–æ—Å—Ç—É–ø–µ, –∏—Ö –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –æ—á–µ–Ω—å —Ç—Ä—É–¥–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å ¬´–∫–æ–¥ —Å–ø–∞–≥–µ—Ç—Ç–∏¬ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ—Ç —á–µ—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏.
 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º. –ü–æ—Å–∫–æ–ª—å–∫—É —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å—Ä–æ–∫–∞ —Å–ª—É–∂–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ, –∏ –∏–º –æ–±—ã—á–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π. –≠—Ç–æ —Ç–∞–∫–∂–µ –¥–µ–ª–∞–µ—Ç –∫–æ–¥, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Å–∏–Ω–≥–ª–µ—Ç–∞—Ö, –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ—Å–∫–æ–ª—å–∫—É –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –Ω–∞—á–∞—Ç—å —Å ¬´—á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞¬ª –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–æ–≤–æ–º –ø—Ä–∏–º–µ—Ä–µ.
 –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ ProfileViewController –º—ã —É–∂–µ –≤–∏–¥–µ–ª–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏ —ç—Ç–∏—Ö 3 –ø—Ä–æ–±–ª–µ–º. –°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ—è—Å–Ω–æ, –∑–∞–≤–∏—Å–∏—Ç –ª–∏ —ç—Ç–æ –æ—Ç UserManager, –∏ –æ–Ω –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ currentUser –≤ –∫–∞—á–µ—Å—Ç–≤–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∞—Å –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–∏—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—é –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤–æ –≤—Ä–µ–º—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è. –ó–≤—É—á–∏—Ç –∫–∞–∫ –æ—à–∏–±–∫–∏, –ø—Ä–æ—Å—Ç–æ –æ–∂–∏–¥–∞—é—â–∏–µ, —á—Ç–æ–±—ã —Å–ª—É—á–∏—Ç—å—Å—è üò¨!
*/

// MARK: - Dependency injection
/*–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã ProfileViewController –æ–±—Ä–∞—â–∞–ª—Å—è –∫ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º –∫–∞–∫ —Å–∏–Ω–≥–ª–µ—Ç–∞–º, –º—ã –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—Å—Ç–∞–≤–∏–º –∏—Ö –≤ –µ–≥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä. –ó–¥–µ—Å—å –º—ã –≤–≤–æ–¥–∏–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ, –∞ —Ç–∞–∫–∂–µ LogOutService, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã:*/
fileprivate struct LogOutService1 {
    func logOut() { }
}

fileprivate class ProfileViewControllerDI: UIViewController {
    private let user: User
    private let logOutService: LogOutService1
    private lazy var nameLabel = UILabel()

    init(user: User, logOutService: LogOutService1) {
        self.user = user
        self.logOutService = logOutService
        super.init(nibName: nil, bundle: nil)
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        nameLabel.text = user.name
    }

    private func handleLogOutButtonTap() {
        logOutService.logOut()
    }
}

/*–†–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–º–Ω–æ–≥–æ –ø–æ–Ω—è—Ç–Ω–µ–µ –∏ –ø—Ä–æ—â–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏. –ù–∞—à –∫–æ–¥ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ —Å–≤–æ—é –º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏ –∏–º–µ–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–π API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –í —Ü–µ–ª–æ–º, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏–Ω–≥–ª–µ—Ç–æ–Ω–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –≤ —á–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã - —ç—Ç–æ —Ö–æ—Ä–æ—à–∏–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å –±–æ–ª–µ–µ —á–µ—Ç–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.*/

// MARK: - Services

/*–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –¥–∞–≤–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω LogOutService. –û–Ω —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Å–≤–æ–∏—Ö –±–∞–∑–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ö–æ—Ä–æ—à–∏–π –∏ —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π API –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ - –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.*/

fileprivate struct NetworkService {
    func request(_ request: URLRequest, then handler: () -> Void) { }
}
fileprivate struct NavigationService {
    func showLoginScreen() { }
}

fileprivate extension URLRequest {
    static func logout(_ user: User) -> URLRequest {
        return URLRequest(url: URL(string: "test")!)
    }
}

fileprivate class LogOutService {
    private let user: User
    private let networkService: NetworkService
    private let navigationService: NavigationService

    init(user: User,
        networkService: NetworkService,
        navigationService: NavigationService) {
        self.user = user
        self.networkService = networkService
        self.navigationService = navigationService
    }

    func logOut() {
        networkService.request(.logout(user)) { [weak self] in
            self?.navigationService.showLoginScreen()
        }
    }
}

// MARK: - Retrofitting
/*–ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∏–Ω–≥–ª–µ—Ç—ã, –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª—É–∂–±—ã, –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–ª–æ–∂–Ω—ã–º –∏ —Ç—Ä—É–¥–æ–µ–º–∫–∏–º. –≠—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å —Ç—Ä—É–¥–Ω–æ –æ–ø—Ä–∞–≤–¥–∞—Ç—å —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞, –∏ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–≥—Ä–æ–º–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥, —á—Ç–æ–±—ã –±—ã—Ç—å –≤–æ–æ–±—â–µ –≤–æ–∑–º–æ–∂–Ω—ã–º.
 
 –ö —Å—á–∞—Å—Ç—å—é, –º—ã –º–æ–∂–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥, –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Ç–æ–º—É, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ ¬´–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Swift-–∫–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã –≤ 3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞¬ª, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –Ω–∞—á–∞—Ç—å —É—Ö–æ–¥–∏—Ç—å –æ—Ç —Å–∏–Ω–≥–ª–µ—Ç–æ–Ω–æ–≤ –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º —Å–ø–æ—Å–æ–±–æ–º. –ö–∞–∫ –∏ –≤–æ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥—è—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª—ã!
 
 –í–º–µ—Å—Ç–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –≤—Å–µ—Ö –Ω–∞—à–∏—Ö —Å–∏–Ω–≥–ª–µ—Ç–æ–Ω–æ–≤ —Å—Ä–∞–∑—É –∏ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤, –º—ã –º–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞—à–∏ —Å–µ—Ä–≤–∏—Å—ã –∫–∞–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä:*/
